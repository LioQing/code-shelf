<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Dynamic Programming/Memoization">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Memoization | Dynamic Programming</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lioqing.github.io/code-shelf/img/logo/logo.png"><meta data-rh="true" name="twitter:image" content="https://lioqing.github.io/code-shelf/img/logo/logo.png"><meta data-rh="true" property="og:url" content="https://lioqing.github.io/code-shelf/docs/Dynamic Programming/Memoization"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Memoization | Code Shelf"><meta data-rh="true" name="description" content="Introduction to Memoization in Dynamic Programming."><meta data-rh="true" property="og:description" content="Introduction to Memoization in Dynamic Programming."><link data-rh="true" rel="icon" href="/code-shelf/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lioqing.github.io/code-shelf/docs/Dynamic Programming/Memoization"><link data-rh="true" rel="alternate" href="https://lioqing.github.io/code-shelf/docs/Dynamic Programming/Memoization" hreflang="en"><link data-rh="true" rel="alternate" href="https://lioqing.github.io/code-shelf/docs/Dynamic Programming/Memoization" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/code-shelf/assets/css/styles.5c996a61.css">
<link rel="preload" href="/code-shelf/assets/js/runtime~main.779081fa.js" as="script">
<link rel="preload" href="/code-shelf/assets/js/main.b62016fb.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/code-shelf/"><div class="navbar__logo"><img src="/code-shelf/img/logo mono.svg" alt="Code Shelf Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/code-shelf/img/logo mono.svg" alt="Code Shelf Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Code Shelf</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/code-shelf/docs/Welcome to Code Shelf">Topics</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lioqing/code-shelf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-shelf/docs/Welcome to Code Shelf">Welcome to Code Shelf!</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/code-shelf/docs/category/dynamic-programming">Dynamic Programming</a><button aria-label="Toggle the collapsible sidebar category &#x27;Dynamic Programming&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-shelf/docs/Dynamic Programming/Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/code-shelf/docs/Dynamic Programming/Memoization">Memoization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-shelf/docs/Dynamic Programming/Bottom-up Approach">Bottom-up Approach</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-shelf/docs/Dynamic Programming/Number of Ways Up the Stair">Number of Ways Up the Stair</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-shelf/docs/Dynamic Programming/Minimum Cost Up the Stair">Minimum Cost Up the Stair</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-shelf/docs/Dynamic Programming/Unique Paths to Corner">Unique Paths to Corner</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-shelf/docs/Dynamic Programming/Edit Distance">Edit Distance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-shelf/docs/Dynamic Programming/0-1 Knapsack Problem">0-1 Knapsack Problem</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/code-shelf/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/code-shelf/docs/category/dynamic-programming"><span itemprop="name">Dynamic Programming</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Memoization</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Memoization</h1></header><p>As the name suggests, memoization is a technique to take memo of the results to reduce computation.
This is particularly useful because of the overlapping subproblems in dynamic programming.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overlapping-subproblems-in-fibonacci-sequence">Overlapping Subproblems in Fibonacci Sequence<a href="#overlapping-subproblems-in-fibonacci-sequence" class="hash-link" aria-label="Direct link to Overlapping Subproblems in Fibonacci Sequence" title="Direct link to Overlapping Subproblems in Fibonacci Sequence">​</a></h2><p>In Fibonacci sequence, if we try to expand the larger of the two terms of the <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span></span>-th Fibonacci number,
we will see that <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n - 2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span> is used twice.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munder accentunder="true"><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><mo stretchy="true">‾</mo></munder><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>3</mn><mo stretchy="false">)</mo><mo>+</mo><munder accentunder="true"><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><mo stretchy="true">‾</mo></munder></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} f(n) &amp;= f(n - 1) + f(n - 2) \\ &amp;= \underline{f(n - 2)} + f(n - 3) + \underline{f(n - 2)} \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.09em;vertical-align:-1.295em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.795em"><span style="top:-3.955em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span><span style="top:-2.455em"><span class="pstrut" style="height:3em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.295em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.795em"><span style="top:-3.955em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">2</span><span class="mclose">)</span></span></span><span style="top:-2.455em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord underline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.75em"><span style="top:-2.59em"><span class="pstrut" style="height:3em"></span><span class="underline-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.45em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">3</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord underline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.75em"><span style="top:-2.59em"><span class="pstrut" style="height:3em"></span><span class="underline-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.45em"><span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.295em"><span></span></span></span></span></span></span></span></span></span></span></span></div><p>Because the recursion tree of the Fibonacci sequence problem is a binary tree,
the number of recursive calls is <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(2^n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>, which is exponential.
So as <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span></span> grows, the number of overlapping subproblems and thus repeated computation also grows exponentially.</p><div class="div_nXRc"><div style="width:100%;height:auto" class="player_A9S3"></div><div class="text_wAa5"><p>Time complexity grows with <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(2^n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>. Yellow nodes represent repeated computation on overlapping subproblems.</p></div></div><p>An exponential growth in time complexity is really bad, so we need to find a way to optimize it,
and memoization is one of the ways to do so.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="applying-memoization">Applying Memoization<a href="#applying-memoization" class="hash-link" aria-label="Direct link to Applying Memoization" title="Direct link to Applying Memoization">​</a></h2><p>As mentioned before, memoization is simply making memo of the results.
In other words, we can store the results in memory when we first compute it, and use it when we need it again.
This is generally done by using an array or a hash table.</p><p>For an implementation in the Fibonacci sequence problem, we will use an array <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dp</mtext></mrow><annotation encoding="application/x-tex">\text{dp}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">dp</span></span></span></span></span></span> to store the results.</p><p>We will first check whether we have already stored the result in <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dp</mtext></mrow><annotation encoding="application/x-tex">\text{dp}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">dp</span></span></span></span></span></span> before doing any computation,
and if we have, we will simply return the result. Otherwise, compute the result and store it in <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dp</mtext></mrow><annotation encoding="application/x-tex">\text{dp}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">dp</span></span></span></span></span></span>.</p><div class="language-pseudocode codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockTitle_Ktv7">n-th Fibonacci Number with Memoization</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pseudocode codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42"><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// initialize the memoization array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">let</span><span class="token plain"> dp </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token keyword" style="color:rgb(166, 38, 164)">null</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">null</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">null</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> of size n </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">let</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token number" style="color:rgb(152, 104, 1)">0</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">let</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// fibonacci function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">:</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token operator" style="color:rgb(56, 58, 66)">&gt;</span><span class="token plain"> int </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// check if we have the memoized result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token selector" style="color:rgb(166, 38, 164)">is</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">not</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">null</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// compute the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">2</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If we try to visualize the recursion tree of the above algorithm, we can see that it only has <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span></span> nodes,
and each subproblem is only computed once. This reduces the time complexity to only <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>.</p><div class="div_nXRc"><div style="width:100%;height:auto" class="player_A9S3"></div><div class="text_wAa5"><p>Time complexity grows with <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>. The repeated computations are eliminated by directly taking stored results in <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dp</mtext></mrow><annotation encoding="application/x-tex">\text{dp}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">dp</span></span></span></span></span></span>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-calls-optimization">Multiple Calls Optimization<a href="#multiple-calls-optimization" class="hash-link" aria-label="Direct link to Multiple Calls Optimization" title="Direct link to Multiple Calls Optimization">​</a></h3><p>In the previous implementation, we assumed only one call to the function with a known <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span></span>.</p><p>If we want to call the function multiple times, e.g. <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mn>7</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(7)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord">7</span><span class="mclose">)</span></span></span></span></span>, then <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mn>13</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(13)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord">13</span><span class="mclose">)</span></span></span></span></span>, then <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mn>10</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(10)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord">10</span><span class="mclose">)</span></span></span></span></span>,
we will recompute the results of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span> to <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mn>7</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(7)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord">7</span><span class="mclose">)</span></span></span></span></span> three times in total.
This is because we reinitialized <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dp</mtext></mrow><annotation encoding="application/x-tex">\text{dp}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">dp</span></span></span></span></span></span> to all nulls every time we run the algorithm.</p><p>To further optimize this, we make <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>dp</mtext></mrow><annotation encoding="application/x-tex">\text{dp}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">dp</span></span></span></span></span></span> an array shared by all calls to the function and grow the array as needed,
which reduces the average time complexity of the solution if multiple calls are made.</p><div class="language-pseudocode codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockTitle_Ktv7">n-th Fibonacci Number with Memoization - Additional Optimization</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pseudocode codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42"><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// initialize the memoization array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">let</span><span class="token plain"> dp </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token number" style="color:rgb(152, 104, 1)">0</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// fibonacci function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">:</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token operator" style="color:rgb(56, 58, 66)">&gt;</span><span class="token plain"> int </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// grow the array if needed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token plain">length </span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;=</span><span class="token plain"> n </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">resize</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> filled with </span><span class="token keyword" style="color:rgb(166, 38, 164)">null</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// check if we have the memoized result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token selector" style="color:rgb(166, 38, 164)">is</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">not</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">null</span><span class="token punctuation" style="color:rgb(160, 161, 167)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// compute the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">2</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-interactive alert alert--primary admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 16 16"><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium notransition_tKYC css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="TaskAltIcon"><path d="M22 5.18 10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10L22 5.18zm-2.21 5.04c.13.57.21 1.17.21 1.78 0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8c1.58 0 3.04.46 4.28 1.25l1.44-1.44C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-1.19-.22-2.33-.6-3.39l-1.61 1.61z"></path></svg></svg></span>Checkpoint</div><div class="admonitionContent_vXIg"><p>In memoization, we can make extra use of what to reduce the number of computations on overlapping subproblems?</p><div class="wrapper_A0ZB"><div class="option-wrapper_ELMd"><div class="option_XQG6 button_Ms2X" tabindex="0" role="button"><div class="option-inner-wrapper_FKu7">Mathematical expressions</div></div></div><div class="option-wrapper_ELMd"><div class="option_XQG6 button_Ms2X" tabindex="0" role="button"><div class="option-inner-wrapper_FKu7">Function calls</div></div></div><div class="option-wrapper_ELMd"><div class="option_XQG6 button_Ms2X" tabindex="0" role="button"><div class="option-inner-wrapper_FKu7">Memory space</div></div></div><div class="option-wrapper_ELMd"><div class="option_XQG6 button_Ms2X" tabindex="0" role="button"><div class="option-inner-wrapper_FKu7">Global variables</div></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation">Implementation<a href="#implementation" class="hash-link" aria-label="Direct link to Implementation" title="Direct link to Implementation">​</a></h2><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Python</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">C++</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Rust</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>In Python, the implementation is almost the same as the pseudocode above,
so it can be easily implemented as follows.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockTitle_Ktv7">n-th Fibonacci Number with Memoization</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42"><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic"># initialize the memoization list</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">dp </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token number" style="color:rgb(152, 104, 1)">0</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic"># fibonacci function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic"># grow the list if needed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">len</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;=</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token plain">extend</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token boolean">None</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">*</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">len</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic"># check if we have the memoized result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">is</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">not</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token punctuation" style="color:rgb(160, 161, 167)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic"># compute the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">2</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic"># main function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">main</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic"># gets input and prints the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    n </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(152, 104, 1)">int</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token builtin" style="color:rgb(152, 104, 1)">input</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">print</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:rgb(56, 58, 66)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(80, 161, 79)">&quot;__main__&quot;</span><span class="token punctuation" style="color:rgb(160, 161, 167)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    main</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>In C++, there are a lot of ways to implement memoization for the Fibonacci sequence problem.
In a more simple implementation, we can represent null by a special value, such as <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></span>,
and use a global vector to store the results.</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockTitle_Ktv7">n-th Fibonacci Number with Memoization - Simple Implementation</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(166, 38, 164)">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(80, 161, 79)">&lt;iostream&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(166, 38, 164)">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(80, 161, 79)">&lt;vector&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// initialize the memoization vector</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;</span><span class="token keyword" style="color:rgb(166, 38, 164)">int</span><span class="token operator" style="color:rgb(56, 58, 66)">&gt;</span><span class="token plain"> dp </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">0</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// fibonacci function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token keyword" style="color:rgb(166, 38, 164)">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// grow the vector if needed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">size</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;=</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">resize</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// check if we have the memoized result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">!=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// compute the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">2</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// main function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">main</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// gets input and prints the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">cin </span><span class="token operator" style="color:rgb(56, 58, 66)">&gt;&gt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">cout </span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;&lt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">0</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>However, this implementation has some drawbacks:</p><ol><li>Using a global variable is not a good practice, we should instead encapsulate the memoization vector.<ul><li>We can use a class.</li><li>We can also use a static variable inside the function, which is what we are going to use in the following example.</li></ul></li><li>This is less important, but instead of using <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></span> to represent a null value, we can use the <code>std::optional</code> class introduced in C++17.<ul><li>This also allows us to use unsigned integers, which is more appropriate for the problem.</li></ul></li></ol><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockTitle_Ktv7">n-th Fibonacci Number with Memoization - Better Implementation</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(166, 38, 164)">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(80, 161, 79)">&lt;iostream&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(166, 38, 164)">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(80, 161, 79)">&lt;vector&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(166, 38, 164)">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(80, 161, 79)">&lt;optional&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// fibonacci function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">size_t </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">size_t n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// initialize the memoization vector</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">static</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">optional</span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">size_t</span><span class="token operator" style="color:rgb(56, 58, 66)">&gt;&gt;</span><span class="token plain"> dp </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">0</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// grow the vector if needed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">size</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;=</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">resize</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">nullopt</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// check if we have the memoized result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">has_value</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">value</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// compute the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">2</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">value</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// main function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">main</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// gets input and prints the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">size_t n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">cin </span><span class="token operator" style="color:rgb(56, 58, 66)">&gt;&gt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">cout </span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;&lt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">0</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>In Rust, due to the ownership system, we cannot use a static variable to store the memoization vector.
We can use a struct instead.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockTitle_Ktv7">n-th Fibonacci Number with Memoization - No Global Variable</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42"><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// Fib struct</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:rgb(193, 132, 1)">Fib</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">Vec</span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;</span><span class="token class-name" style="color:rgb(193, 132, 1)">Option</span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;</span><span class="token keyword" style="color:rgb(166, 38, 164)">usize</span><span class="token operator" style="color:rgb(56, 58, 66)">&gt;&gt;</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// implementation for Fib struct</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">impl</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">Fib</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// initialize the memoization vector</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(64, 120, 242)">new</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">Self</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token keyword" style="color:rgb(166, 38, 164)">Self</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">            dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">:</span><span class="token plain"> </span><span class="token macro property">vec!</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token class-name" style="color:rgb(193, 132, 1)">Some</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token number" style="color:rgb(152, 104, 1)">0</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">Some</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// fibonacci function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token operator" style="color:rgb(56, 58, 66)">&amp;</span><span class="token keyword" style="color:rgb(166, 38, 164)">mut</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">self</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">usize</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">usize</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// grow the array if needed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">self</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token plain">dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">len</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;=</span><span class="token plain"> n </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">            </span><span class="token keyword" style="color:rgb(166, 38, 164)">self</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token plain">dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">resize</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">None</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// check if we have the memoized result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token keyword" style="color:rgb(166, 38, 164)">match</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">self</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token plain">dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">            </span><span class="token class-name" style="color:rgb(193, 132, 1)">Some</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">            </span><span class="token class-name" style="color:rgb(193, 132, 1)">None</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">                </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">//compute the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">                </span><span class="token keyword" style="color:rgb(166, 38, 164)">self</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token plain">dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">Some</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token keyword" style="color:rgb(166, 38, 164)">self</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">self</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">2</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">                </span><span class="token keyword" style="color:rgb(166, 38, 164)">self</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token plain">dp</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">unwrap</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// main function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(64, 120, 242)">main</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// prints the result for fib(7)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">let</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">7</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">let</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">mut</span><span class="token plain"> fib </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">Fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token function" style="color:rgb(64, 120, 242)">new</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token macro property">println!</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token string" style="color:rgb(80, 161, 79)">&quot;{}&quot;</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>However, the caller may initialize multiple instance of <code>Fib</code>, which is not very good.
In the example below, we will use the <code>lazy_static</code> crate and the <code>Mutex</code> class to initialize the static memoization vector, as a singleton.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Ownership &amp; Singleton Pattern in Rust</div><div class="admonitionContent_vXIg"><p>Because of the ownership system in Rust, we cannot make a singleton easily. There are crates like <code>lazy_static</code> allowing us to initialize
a static variable at run-time, but it is still not possible to mutate the variable. We can use <code>Mutex</code> to provide single-thread access to
the singleton, and there are other ways to provide multi-thread access such as <code>RwLock</code>.</p></div></div><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockTitle_Ktv7">n-th Fibonacci Number with Memoization - With Static Variable</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42"><span class="token keyword" style="color:rgb(166, 38, 164)">use</span><span class="token plain"> </span><span class="token namespace">std</span><span class="token namespace punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token namespace">sync</span><span class="token namespace punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token class-name" style="color:rgb(193, 132, 1)">Mutex</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">use</span><span class="token plain"> </span><span class="token namespace">lazy_static</span><span class="token namespace punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token plain">lazy_static</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// initialize the memoization vector</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token macro property">lazy_static!</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">ref</span><span class="token plain"> </span><span class="token constant" style="color:rgb(152, 104, 1)">DP</span><span class="token punctuation" style="color:rgb(160, 161, 167)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">Mutex</span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;</span><span class="token class-name" style="color:rgb(193, 132, 1)">Vec</span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;</span><span class="token class-name" style="color:rgb(193, 132, 1)">Option</span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;</span><span class="token keyword" style="color:rgb(166, 38, 164)">usize</span><span class="token operator" style="color:rgb(56, 58, 66)">&gt;&gt;</span><span class="token operator" style="color:rgb(56, 58, 66)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">Mutex</span><span class="token punctuation" style="color:rgb(160, 161, 167)">::</span><span class="token function" style="color:rgb(64, 120, 242)">new</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token macro property">vec!</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token class-name" style="color:rgb(193, 132, 1)">Some</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token number" style="color:rgb(152, 104, 1)">0</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">Some</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// fibonacci function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">usize</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(166, 38, 164)">usize</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// grow the vector if needed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">if</span><span class="token plain"> </span><span class="token constant" style="color:rgb(152, 104, 1)">DP</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">lock</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">unwrap</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">len</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">&lt;=</span><span class="token plain"> n </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token constant" style="color:rgb(152, 104, 1)">DP</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">lock</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">unwrap</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">resize</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">None</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// check if we have the memoized result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">let</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(152, 104, 1)">DP</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">lock</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">unwrap</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">clone</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">match</span><span class="token plain"> x </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token class-name" style="color:rgb(193, 132, 1)">Some</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token class-name" style="color:rgb(193, 132, 1)">None</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">            </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">//compute the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">            </span><span class="token constant" style="color:rgb(152, 104, 1)">DP</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">lock</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">unwrap</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(193, 132, 1)">Some</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">1</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(56, 58, 66)">+</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n </span><span class="token operator" style="color:rgb(56, 58, 66)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">2</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">            </span><span class="token constant" style="color:rgb(152, 104, 1)">DP</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">lock</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">unwrap</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">]</span><span class="token punctuation" style="color:rgb(160, 161, 167)">.</span><span class="token function" style="color:rgb(64, 120, 242)">unwrap</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// main function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token keyword" style="color:rgb(166, 38, 164)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(64, 120, 242)">main</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(160, 161, 167)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token comment" style="color:rgb(160, 161, 167);font-style:italic">// prints the result for fib(7)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token keyword" style="color:rgb(166, 38, 164)">let</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(56, 58, 66)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(152, 104, 1)">7</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain">    </span><span class="token macro property">println!</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token string" style="color:rgb(80, 161, 79)">&quot;{}&quot;</span><span class="token punctuation" style="color:rgb(160, 161, 167)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(64, 120, 242)">fib</span><span class="token punctuation" style="color:rgb(160, 161, 167)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">)</span><span class="token punctuation" style="color:rgb(160, 161, 167)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42"><span class="token plain"></span><span class="token punctuation" style="color:rgb(160, 161, 167)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/code-shelf/docs/Dynamic Programming/Introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/code-shelf/docs/Dynamic Programming/Bottom-up Approach"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Bottom-up Approach</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overlapping-subproblems-in-fibonacci-sequence" class="table-of-contents__link toc-highlight">Overlapping Subproblems in Fibonacci Sequence</a></li><li><a href="#applying-memoization" class="table-of-contents__link toc-highlight">Applying Memoization</a><ul><li><a href="#multiple-calls-optimization" class="table-of-contents__link toc-highlight">Multiple Calls Optimization</a></li></ul></li><li><a href="#implementation" class="table-of-contents__link toc-highlight">Implementation</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Featured Topics</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/code-shelf/docs/category/dynamic-programming">Dynamic Programming</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/lioqing/code-shelf" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Lio Qing.</div></div></div></footer></div>
<script src="/code-shelf/assets/js/runtime~main.779081fa.js"></script>
<script src="/code-shelf/assets/js/main.b62016fb.js"></script>
</body>
</html>